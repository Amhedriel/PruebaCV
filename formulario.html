<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/media/img/favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="32x32" href="/media/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/media/img/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="stylesheet" href="./styles/styles-dist.css">
  <script src="/scripts/scripts.js"></script>
  <title>CONTACTO</title>
</head>
<body>
  <header class="header">
    <section class="header__contact" id="contact">
      <div class="u-wraper">
        <div class="contact__content">
          <form action="enviar.html" id="form" class="form" method="post">
            <h3 class="tag"><span>HABLEMOS</span></h3>

            <label for="establishment">Institución<span></span></label>
            <input type="text" name="establishment" id="establishment" placeholder="Establecimiento, organismo" autofocus>

            <label for="country">País</label>
            <input type="text" name="country" id="country" placeholder="De institución en funciones">

            <label for="name">Nombre completo<span>*</span></label>
            <input type="text" name="name" id="name" placeholder="Nombres y apellidos" required>

            <label for="email">Correo electrónico<span>*</span></label>
            <input type="email" name="email" id="email" placeholder="correo@proveedor.com" required>

            <label for="phone">Teléfono<span>*</span></label>
            <input type="tel" name="phone" id="phone" placeholder="Con código de área" required>

            <label for="reason">Motivo del contacto<span>*</span></label>
            <textarea for="reason" name="reason" id="reason" cols="30" rows="15" placeholder="max. 350 caracteres. Se responderá a la brevedad posible" minlength="7" maxlength="350" required></textarea>
            <button type="submit" class="btn primary full">ENVIAR FORMULARIO POR EMAIL</button>
          </form> 
          <a href="mailto:davikin_01@hotmail.com" class="talk" id="talk">mail</a>         
        </div>
      </div>
    </section>
  </header>

  <main class="main">

  </main>

  <footer class="footer">
    <script>
        const $form = document.querySelector('#form');
        const $buttonMailto = document.querySelector('#talk');

        $form.addEventListener('submit', handleSubmit);

        function handleSubmit(event) {
          event.preventDefault();

          const form = new FormData(this);
          console.log(form.get('name'));

          $buttonMailto.setAttribute('href', `mailto:davikin_01@hotmail.com?subject=${form.get('email')}&body=Establecimiento: "${form.get('establishment')}" País: "${form.get('country')}" Nombre:"${form.get('name')}" Teléfono: "${form.get('phone')}" Contacto: "${form.get('reason')}"`);
          $buttonMailto.click();
        }
    </script>
  </footer>
  
</body>
</html>